<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
    "http://struts.apache.org/dtds/struts-2.3.dtd  ">
<struts>
    <constant name="struts.enable.DynamicMethodInvocation" value="false" />
    <constant name="struts.devMode" value="true" />   
    <constant name="struts.custom.i18n.resources" value="global"></constant>
    <!--<constant name="struts.convention.action.packages" value="org.aepscolombia.platform.controllers"/>-->     
    <package name="principal" extends="struts-default,json-default" namespace="/">
        <interceptors>
            <interceptor name="requireUser" class="org.aepscolombia.platform.interceptors.RequireUserInterceptor"/>
            <!--<interceptor name="jcaptchaDefaultStack" class="com.google.code.jcaptcha4struts2.core.interceptors.JCaptchaValidationIntercepter"/>-->
            <interceptor-stack name="defaultStackAeps">    
                <interceptor-ref name="requireUser" />
                <interceptor-ref name="defaultStack" />        
                <!--<interceptor-ref name="jcaptchaDefaultStack" />-->               
                <!--<interceptor-ref name="timer" />
                <interceptor-ref name="logger" />-->
            </interceptor-stack>
        </interceptors>
        <!--<default-action-ref name="initial" />-->

        <global-results>
            <result name="400">
                /WEB-INF/views/errors/400.jsp                
            </result>
            <result name="401">
                /WEB-INF/views/errors/401.jsp                
            </result>
            <result name="403">
                /WEB-INF/views/errors/403.jsp
            </result>
            <result name="404">
                /WEB-INF/views/errors/404.jsp
            </result>
        </global-results>
        <!-- Public part -->
        <action name="initial">
            <result>/layout.jsp</result>
        </action>     
        <action name="home">
            <result>/WEB-INF/views/generals/home.jsp</result>
        </action>     
        <action name="about">
            <result>/WEB-INF/views/generals/aboutUs.jsp</result>
        </action>     
        <action name="*" class="org.aepscolombia.platform.controllers.BaseAction">
            <result name="input">/WEB-INF/views/errors/404.jsp</result>
        </action>
<!--        <action name="contact"  method="contact" class="org.aepscolombia.platform.controllers.ActionContact">
            <result>/WEB-INF/views/contacts.jsp</result>
        </action>-->
        <action name="contact">
            <result>/WEB-INF/views/generals/contacts.jsp</result>
        </action>
        <action name="verifyUser"  method="verifyUser" class="org.aepscolombia.platform.controllers.ActionLogin">
<!--            <result>/WEB-INF/views/layoutPrivate.jsp</result>-->
            <result type="redirectAction">accessPlatform</result>
<!--            <result name="error" type="redirectAction">400</result>
            <result name="input" type="redirectAction">404</result>-->
        </action> 
        <action name="accessPlatform">
            <result>/WEB-INF/views/generals/accessPlatform.jsp</result>
        </action>
        <action name="restorePassword"  method="restorePassword" class="org.aepscolombia.platform.controllers.ActionLogin">
            <interceptor-ref name="jsonValidationWorkflowStack"/>
            <result name="states" type="json"></result>
        </action>
        <action name="verifyUserToRestore"  method="verifyUserToRestore" class="org.aepscolombia.platform.controllers.ActionLogin">
            <result>/WEB-INF/views/login/restorePass.jsp</result>
<!--            <result name="error" type="redirectAction">400</result>
            <result name="input" type="redirectAction">
                <param name="actionName">404</param>
                <param name="namespace">/</param>
            </result>-->
            <!--<result name="input" type="redirectAction">404</result>-->
        </action> 
        <action name="changePassUser"  method="changePassUser" class="org.aepscolombia.platform.controllers.ActionLogin">
            <interceptor-ref name="jsonValidationWorkflowStack"/>
            <result name="states" type="json"></result>
        </action>
        <action name="login"  method="login" class="org.aepscolombia.platform.controllers.ActionLogin">
            <interceptor-ref name="jsonValidationWorkflowStack"/>
            <!--<result name = "states" type="json"></result>-->
<!--            <result type="redirectAction">
                <param name="actionName">verify</param>
                <param name="namespace">/</param>
            </result>-->
            <result>/WEB-INF/views/generals/layoutPrivate.jsp</result>
            <!--<result type="redirect">/WEB-INF/views/dashboard.jsp</result>-->
            <result name="input">/WEB-INF/views/login/login.jsp</result>
        </action>
        <action name="saveUser" method="saveData" class="org.aepscolombia.platform.controllers.ActionLogin">
            <interceptor-ref name="jsonValidationWorkflowStack"/>
            <result name="states" type="json"></result>
            <!--<result name="input">/WEB-INF/views/form-producer.jsp</result>-->
        </action>
        <!-- End public part -->
        
        <!-- Private part -->
        <action name="signin" class="org.aepscolombia.platform.controllers.ActionLogin">
            <interceptor-ref name="defaultStackAeps"/>
            <result>/WEB-INF/views/generals/layoutPrivate.jsp</result>
            <result name="input">/WEB-INF/views/login/login.jsp</result>
        </action>                           
        <action name="logout" method="logout" class="org.aepscolombia.platform.controllers.ActionLogin">
            <!--<result type="redirectAction">initial</result>-->
            <result type="redirectAction">
                <param name="actionName">initial</param>
                <param name="namespace">/</param>
            </result>
        </action>    
        <action name="dashboard">
            <interceptor-ref name="defaultStackAeps"/>
            <result>/WEB-INF/views/generals/layoutPrivate.jsp</result>
        </action>
        <action name="resume">
            <interceptor-ref name="defaultStackAeps"/>
            <result>/WEB-INF/views/generals/dashboard.jsp</result>
        </action>
        <action name="getting">
            <interceptor-ref name="defaultStackAeps"/>
            <result>/WEB-INF/views/generals/getting.jsp</result>
        </action>         
        <!-- End private part -->
    </package>  
    
    <package name="producer" extends="principal" namespace="/">
        <action name="comboDocumentsTypes" method="comboDocumentsTypes" class="org.aepscolombia.platform.controllers.ActionProducer">
            <interceptor-ref name="defaultStackAeps"/>
            <result type="json" name="combo">
                <param name="contentType">text/html</param>
            </result>
        </action>
        <action name="comboDepartments" method="comboDepartments" class="org.aepscolombia.platform.controllers.ActionProducer">
            <interceptor-ref name="defaultStackAeps"/>
            <result type="json" name="combo">
                <param name="contentType">text/html</param>
            </result>
        </action>
        <action name="comboMunicipalities" method="comboMunicipalities" class="org.aepscolombia.platform.controllers.ActionProducer">
            <interceptor-ref name="defaultStackAeps"/>
            <result type="json" name="combo">
                <param name="contentType">text/html</param>
            </result>
        </action>
        <action name="searchProducer" method="search" class="org.aepscolombia.platform.controllers.ActionProducer">
            <interceptor-ref name="defaultStackAeps"/>
            <result>/WEB-INF/views/producers/list-producer.jsp</result>
            <!--<result>/WEB-INF/views/prueba.jsp</result>-->
        </action>
        <action name="showProducer" method="show" class="org.aepscolombia.platform.controllers.ActionProducer">
            <interceptor-ref name="defaultStackAeps"/>
            <result>/WEB-INF/views/producers/form-producer.jsp</result>
        </action>
        <action name="saveProducer" method="saveData" class="org.aepscolombia.platform.controllers.ActionProducer">
            <interceptor-ref name="defaultStackAeps"/>
            <interceptor-ref name="jsonValidationWorkflowStack"/>
            <result name = "states" type="json"></result>
            <result name = "success">/WEB-INF/views/producers/form-producer.jsp</result>
            <!--<result name="input">/WEB-INF/views/view-productor.jsp</result>-->
        </action>
        <!--        <action name="modifyProducer" method="modify" class="org.aepscolombia.platform.controllers.ActionProducer">
            <result>/WEB-INF/views/login.jsp</result>
        </action>-->
        <action name="deleteProducer" method="delete" class="org.aepscolombia.platform.controllers.ActionProducer">
            <interceptor-ref name="defaultStackAeps"/>
            <result name = "states" type="json"></result>
        </action>        
    </package>
    
    <package name="farm" extends="principal" namespace="/">       
        <action name="comboDepartments" method="comboDepartments" class="org.aepscolombia.platform.controllers.ActionFarm">
            <interceptor-ref name="defaultStackAeps"/>
            <result type="json" name="combo">
                <param name="contentType">text/html</param>
            </result>
        </action>
        <action name="comboMunicipalities" method="comboMunicipalities" class="org.aepscolombia.platform.controllers.ActionFarm">
            <interceptor-ref name="defaultStackAeps"/>
            <result type="json" name="combo">
                <param name="contentType">text/html</param>
            </result>
        </action>
        <action name="searchFarm" method="search" class="org.aepscolombia.platform.controllers.ActionFarm">
            <interceptor-ref name="defaultStackAeps"/>
            <result>/WEB-INF/views/farms/list-farm.jsp</result>
        </action>
        <action name="showFarm" method="show" class="org.aepscolombia.platform.controllers.ActionFarm">
            <interceptor-ref name="defaultStackAeps"/>
            <result>/WEB-INF/views/farms/form-farm.jsp</result>
        </action>
        <action name="saveFarm" method="saveData" class="org.aepscolombia.platform.controllers.ActionFarm">
            <interceptor-ref name="defaultStackAeps"/>
            <interceptor-ref name="jsonValidationWorkflowStack"/>
            <result name = "states" type="json"></result>
            <result name = "success">/WEB-INF/views/farms/form-farm.jsp</result>
        </action>
        <action name="deleteFarm" method="delete" class="org.aepscolombia.platform.controllers.ActionFarm">
            <interceptor-ref name="defaultStackAeps"/>
            <result name = "states" type="json"></result>
        </action>
    </package>
    
    <package name="field" extends="principal" namespace="/"> 
        <action name="comboFieldTypes" method="comboFieldTypes" class="org.aepscolombia.platform.controllers.ActionFarm">
            <interceptor-ref name="defaultStackAeps"/>
            <result type="json" name="combo">
                <param name="contentType">text/html</param>
            </result>
        </action>     
        <action name="searchField" method="search" class="org.aepscolombia.platform.controllers.ActionFarm">
            <interceptor-ref name="defaultStackAeps"/>
            <result>/WEB-INF/views/fields/list-field.jsp</result>
        </action>
        <action name="showField" method="show" class="org.aepscolombia.platform.controllers.ActionFarm">
            <interceptor-ref name="defaultStackAeps"/>
            <result>/WEB-INF/views/fields/form-field.jsp</result>
        </action>
        <action name="saveField" method="saveData" class="org.aepscolombia.platform.controllers.ActionFarm">
            <interceptor-ref name="defaultStackAeps"/>
            <interceptor-ref name="jsonValidationWorkflowStack"/>
            <result name = "states" type="json"></result>
            <result name = "success">/WEB-INF/views/fields/form-field.jsp</result>
        </action>
        <action name="deleteField" method="delete" class="org.aepscolombia.platform.controllers.ActionFarm">
            <interceptor-ref name="defaultStackAeps"/>
            <result name = "states" type="json"></result>
        </action>       
    </package>
</struts>
